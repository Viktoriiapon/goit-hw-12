{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form'),\n  infoEl: document.querySelector('.js-list-img'),\n  loaderEl: document.querySelector('.loader'),\n};\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n  \n\n  refs.infoEl.innerHTML = '';\n  \n  \n  refs.loaderEl.classList.add('show');\n\n  const userQuery = e.target.elements.query.value;\n  if (!userQuery) {\n    iziToast.warning({\n      position: 'topRight',\n      message: 'Please enter a search query.',\n    });\n    \n    \n    refs.loaderEl.classList.remove('show');\n    return;\n  }\n\n  getImage(userQuery)\n    .then(data => {\n    \n      refs.loaderEl.classList.remove('show');\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n          position: 'topRight',\n          messageSize: '50',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        renderGallery(data);\n        e.target.elements.query.value = '';\n      }\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        position: 'topRight',\n        messageSize: '50',\n        message: 'Failed to fetch images. Please try again later.',\n      });\n      \n      refs.loaderEl.classList.remove('show');\n    });\n}\n\nfunction getImage(nameImage) {\n  const BASE_URL = 'https://pixabay.com/';\n  const END_POINT = '/api/';\n  const PARAMS = `?key=42187150-1e170edc08d41224404163b7f&q=${nameImage}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const url = BASE_URL + END_POINT + PARAMS;\n\n  return fetch(url).then(res => res.json());\n}\n\nfunction imageTemplate(nameImage) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = nameImage;\n  return `<div class=\"image js-image\">\n    <div class=\"image-container\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          class=\"image js-image\"\n        />\n      </a>\n    </div>\n    <div class=\"image-body\">\n      <ul class=\"info\">\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Likes</b>\n          <span class=\"info-item-value\">${likes}</span>\n        </li>\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Views</b>\n          <span class=\"info-item-value\">${views}</span>\n        </li>\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Comments</b>\n          <span class=\"info-item-value\">${comments}</span>\n        </li>\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Downloads</b>\n          <span class=\"info-item-value\">${downloads}</span>\n        </li>\n      </ul>\n    </div>\n  </div>`;\n}\n\nfunction renderGallery({ hits }) {\n  const markup = hits.map(imageTemplate).join('');\n  refs.infoEl.insertAdjacentHTML('beforeend', markup);\n  \n \n  const lightbox = new SimpleLightbox('.gallery-link', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n}"],"names":["refs","onFormSubmit","e","userQuery","iziToast","getImage","data","renderGallery","error","nameImage","BASE_URL","END_POINT","PARAMS","url","res","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hits","markup","SimpleLightbox"],"mappings":"6vBAMA,MAAMA,EAAO,CACX,OAAQ,SAAS,cAAc,iBAAiB,EAChD,OAAQ,SAAS,cAAc,cAAc,EAC7C,SAAU,SAAS,cAAc,SAAS,CAC5C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAY,EAEnD,SAASA,EAAaC,EAAG,CACvBA,EAAE,eAAc,EAGhBF,EAAK,OAAO,UAAY,GAGxBA,EAAK,SAAS,UAAU,IAAI,MAAM,EAElC,MAAMG,EAAYD,EAAE,OAAO,SAAS,MAAM,MAC1C,GAAI,CAACC,EAAW,CACdC,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,8BACf,CAAK,EAGDJ,EAAK,SAAS,UAAU,OAAO,MAAM,EACrC,MACD,CAEDK,EAASF,CAAS,EACf,KAAKG,GAAQ,CAEZN,EAAK,SAAS,UAAU,OAAO,MAAM,EAEjCM,EAAK,KAAK,SAAW,EACvBF,EAAS,MAAM,CACb,SAAU,WACV,YAAa,KACb,QAAS,0EACnB,CAAS,GAEDG,EAAcD,CAAI,EAClBJ,EAAE,OAAO,SAAS,MAAM,MAAQ,GAExC,CAAK,EACA,MAAMM,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CJ,EAAS,MAAM,CACb,SAAU,WACV,YAAa,KACb,QAAS,iDACjB,CAAO,EAEDJ,EAAK,SAAS,UAAU,OAAO,MAAM,CAC3C,CAAK,CACL,CAEA,SAASK,EAASI,EAAW,CAC3B,MAAMC,EAAW,uBACXC,EAAY,QACZC,EAAS,6CAA6CH,CAAS,2DAE/DI,EAAMH,EAAWC,EAAYC,EAEnC,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAC1C,CAEA,SAASC,EAAcN,EAAW,CAChC,KAAM,CACJ,aAAAO,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGb,EACJ,MAAO;AAAA;AAAA,sCAE6BQ,CAAa;AAAA;AAAA,iBAElCD,CAAY;AAAA,iBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CASqBC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0CAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,SAKnD,CAEA,SAASf,EAAc,CAAE,KAAAgB,GAAQ,CAC/B,MAAMC,EAASD,EAAK,IAAIR,CAAa,EAAE,KAAK,EAAE,EAC9Cf,EAAK,OAAO,mBAAmB,YAAawB,CAAM,EAGjC,IAAIC,EAAe,gBAAiB,CACnD,aAAc,IACd,aAAc,KAClB,CAAG,EACQ,QAAO,CAClB"}