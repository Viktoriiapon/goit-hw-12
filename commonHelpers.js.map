{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form'),\n  infoEl: document.querySelector('.js-list-img'),\n  loaderEl: document.querySelector('.loader'),\n  loadMoreBtnEl: document.querySelector('.btn-load'),\n};\n\nlet page = 1;\nlet userQuery = '';\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtnEl.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  page = 1;\n  userQuery = e.target.elements.query.value.trim();\n  refs.infoEl.innerHTML = '';\n  refs.loadMoreBtnEl.style.display = 'none';\n  refs.loaderEl.style.display = 'block';\n  try {\n    const data = await getImage(userQuery, page);\n    renderGallery(data);\n    refs.loadMoreBtnEl.style.display = 'block';\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      messageSize: '30',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    refs.loaderEl.style.display = 'none';\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n  refs.loaderEl.style.display = 'block';\n  try {\n    const data = await getImage(userQuery, page);\n    appendImages(data);\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      messageSize: '30',\n      message: 'Failed to fetch more images. Please try again later.',\n    });\n  } finally {\n    refs.loaderEl.style.display = 'none';\n  }\n}\n\nasync function getImage(nameImage, page) {\n  const params = {\n    key: '42187150-1e170edc08d41224404163b7f',\n    q: nameImage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n  const url = `https://pixabay.com/api/?`;\n  const response = await axios.get(url, { params });\n  return response.data;\n}\n\nfunction imageTemplate(nameImage) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = nameImage;\n  return `<div class=\"image js-image\">\n    <div class=\"image-container\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          class=\"image js-image\"\n        />\n      </a>\n    </div>\n    <div class=\"image-body\">\n      <ul class=\"info\">\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Likes</b>\n          <span class=\"info-item-value\">${likes}</span>\n        </li>\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Views</b>\n          <span class=\"info-item-value\">${views}</span>\n        </li>\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Comments</b>\n          <span class=\"info-item-value\">${comments}</span>\n        </li>\n        <li class=\"info-item\">\n          <b class=\"info-item-title\">Downloads</b>\n          <span class=\"info-item-value\">${downloads}</span>\n        </li>\n      </ul>\n    </div>\n  </div>`;\n}\n\nfunction renderGallery({ hits }) {\n  const markup = hits.map(imageTemplate).join('');\n  refs.infoEl.innerHTML = markup;\n  const lightbox = new SimpleLightbox('.gallery-link', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n}\n\nfunction appendImages({ hits }) {\n  const markup = hits.map(imageTemplate).join('');\n  refs.infoEl.insertAdjacentHTML('beforeend', markup);\n}"],"names":["refs","page","userQuery","onFormSubmit","onLoadMore","e","data","getImage","renderGallery","iziToast","appendImages","nameImage","params","url","axios","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hits","markup","SimpleLightbox"],"mappings":"owBAMA,MAAMA,EAAO,CACX,OAAQ,SAAS,cAAc,iBAAiB,EAChD,OAAQ,SAAS,cAAc,cAAc,EAC7C,SAAU,SAAS,cAAc,SAAS,EAC1C,cAAe,SAAS,cAAc,WAAW,CACnD,EAEA,IAAIC,EAAO,EACPC,EAAY,GAEhBF,EAAK,OAAO,iBAAiB,SAAUG,CAAY,EACnDH,EAAK,cAAc,iBAAiB,QAASI,CAAU,EAEvD,eAAeD,EAAaE,EAAG,CAC7BA,EAAE,eAAc,EAChBJ,EAAO,EACPC,EAAYG,EAAE,OAAO,SAAS,MAAM,MAAM,OAC1CL,EAAK,OAAO,UAAY,GACxBA,EAAK,cAAc,MAAM,QAAU,OACnCA,EAAK,SAAS,MAAM,QAAU,QAC9B,GAAI,CACF,MAAMM,EAAO,MAAMC,EAASL,EAAWD,CAAI,EAC3CO,EAAcF,CAAI,EAClBN,EAAK,cAAc,MAAM,QAAU,OACpC,MAAe,CACdS,EAAS,MAAM,CACb,SAAU,WACV,YAAa,KACb,QAAS,iDACf,CAAK,CACL,QAAY,CACRT,EAAK,SAAS,MAAM,QAAU,MAC/B,CACH,CAEA,eAAeI,GAAa,CAC1BH,GAAQ,EACRD,EAAK,SAAS,MAAM,QAAU,QAC9B,GAAI,CACF,MAAMM,EAAO,MAAMC,EAASL,EAAWD,CAAI,EAC3CS,EAAaJ,CAAI,CAClB,MAAe,CACdG,EAAS,MAAM,CACb,SAAU,WACV,YAAa,KACb,QAAS,sDACf,CAAK,CACL,QAAY,CACRT,EAAK,SAAS,MAAM,QAAU,MAC/B,CACH,CAEA,eAAeO,EAASI,EAAWV,EAAM,CACvC,MAAMW,EAAS,CACb,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMV,CACV,EACQY,EAAM,4BAEZ,OADiB,MAAMC,EAAM,IAAID,EAAK,CAAE,OAAAD,CAAM,CAAE,GAChC,IAClB,CAEA,SAASG,EAAcJ,EAAW,CAChC,KAAM,CACJ,aAAAK,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGX,EACJ,MAAO;AAAA;AAAA,sCAE6BM,CAAa;AAAA;AAAA,iBAElCD,CAAY;AAAA,iBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CASqBC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0CAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,SAKnD,CAEA,SAASd,EAAc,CAAE,KAAAe,GAAQ,CAC/B,MAAMC,EAASD,EAAK,IAAIR,CAAa,EAAE,KAAK,EAAE,EAC9Cf,EAAK,OAAO,UAAYwB,EACP,IAAIC,EAAe,gBAAiB,CACnD,aAAc,IACd,aAAc,KAClB,CAAG,EACQ,QAAO,CAClB,CAEA,SAASf,EAAa,CAAE,KAAAa,GAAQ,CAC9B,MAAMC,EAASD,EAAK,IAAIR,CAAa,EAAE,KAAK,EAAE,EAC9Cf,EAAK,OAAO,mBAAmB,YAAawB,CAAM,CACpD"}